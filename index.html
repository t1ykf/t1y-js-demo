<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>t1y-js-demo</title>
    <script src="./js/axios.min.js"></script>
    <script src="./js/crypto-js.js"></script>
    <script src="./js/t1y.js"></script>
  </head>
  <body>
    <div>
      <h1>t1y-js-demo</h1>
      <h3>
        这是一个T1后端云 JavaScript 使用例子，使用前请修改 js/t1y.js
        中的密钥信息。
      </h3>
    </div>
    <div>
      <button onclick="_createOne()">添加一条数据</button>
      <button onclick="_deleteOne()">删除一条数据</button>
    </div>
    <div>
      <h6>
        操作结果可在浏览器控制台中查看，您还可以基于 request
        函数封装其余的接口请求（只需一行代码）。
      </h6>
    </div>
    <script>
      var objectId = "";
      function _createOne() {
        // 向 test 表中添加数据
        createOne("test", { a: 1, b: 2 })
          .then((response) => {
            objectId = response.data.data.objectId; // 添加成功后将 objectId 保存下来
            console.log("添加成功：", response.data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      function _deleteOne() {
        // 删除指定 ID 数据（确保 ID 正确才能被删除）
        deleteOne("test", objectId) // 删除刚刚添加的数据
          .then((response) => {
            console.log("删除成功：", response.data);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
    </script>
  </body>
</html>
